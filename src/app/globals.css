/* Fichier de styles globaux améliorés */
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Couleurs principales alignées avec tailwind.config.js */
  --primary-color: #4f46e5; /* indigo-600 */
  --primary-hover: #4338ca; /* indigo-700 */
  --primary-darker: #3730a3; /* indigo-800 */
  
  --secondary-color: #10b981; /* emerald-500 */
  --secondary-hover: #059669; /* emerald-600 */
  
  --accent-color: #f59e0b; /* amber-500 */
  --accent-hover: #d97706; /* amber-600 */
  
  /* Couleurs de statut */
  --success: #059669; /* emerald-600 */
  --error: #dc2626; /* red-600 */
  --warning: #d97706; /* amber-600 */
  --info: #2563eb; /* blue-600 */
  
  /* Mode clair - aligné avec tailwind.config.js */
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc; /* slate-50 */
  --bg-tertiary: #f1f5f9; /* slate-100 */
  
  --text-primary: #0f172a; /* slate-900 */
  --text-secondary: #334155; /* slate-700 */
  --text-tertiary: #64748b; /* slate-500 */
  
  /* Couleurs des bordures */
  --border-color: #e2e8f0; /* slate-200 */
  --border-focus: #94a3b8; /* slate-400 */
  --border-light: #e2e8f0; /* slate-200 */
  --border-medium: #cbd5e1; /* slate-300 */
  --border-dark: #94a3b8; /* slate-400 */
  
  /* Couleurs des contrôles */
  --input-bg: #ffffff;
  --input-text: #0f172a; /* slate-900 */
  --input-placeholder: #94a3b8; /* slate-400 */
  
  /* Couleurs des boutons */
  --button-text: #ffffff;
  --button-disabled-bg: #cbd5e1; /* slate-300 */
  --button-disabled-text: #64748b; /* slate-500 */
}

/* Mode sombre */
.dark {
  /* Mode sombre - aligné avec tailwind.config.js */
  --bg-primary: #0f172a; /* slate-900 */
  --bg-secondary: #1e293b; /* slate-800 */
  --bg-tertiary: #334155; /* slate-700 */
  
  --text-primary: #f8fafc; /* slate-50 */
  --text-secondary: #e2e8f0; /* slate-200 */
  --text-tertiary: #cbd5e1; /* slate-300 */
  
  /* Couleurs des bordures en mode sombre */
  --border-light: #334155; /* slate-700 */
  --border-medium: #475569; /* slate-600 */
  --border-dark: #64748b; /* slate-500 */
  --border-color: #334155; /* slate-700 */
  --border-focus: #cbd5e1; /* slate-300 */
  
  /* Couleurs des contrôles en mode sombre */
  --input-bg: #1e293b; /* slate-800 */
  --input-text: #f8fafc; /* slate-50 */
  --input-placeholder: #64748b; /* slate-500 */
  
  /* Les couleurs principales restent les mêmes mais peuvent être ajustées pour un meilleur contraste */
  --primary-color: #6366f1; /* indigo-500 - légèrement plus clair pour le contraste */
  --primary-hover: #4f46e5; /* indigo-600 */
  
  /* Couleurs des boutons en mode sombre */
  --button-text: #ffffff;
  --button-disabled-bg: #475569; /* slate-600 */
  --button-disabled-text: #94a3b8; /* slate-400 */
}

/* Styles de base */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  background-color: var(--bg-primary);
  color: var(--text-primary);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Styles pour les modules et leçons */
.lesson-container, 
.module-container {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  border-color: var(--border-light);
}

.lesson-content,
.module-content {
  color: var(--text-primary);
}

.lesson-header,
.module-header {
  color: var(--text-primary);
  border-bottom: 1px solid var(--border-light);
}

.lesson-navigation,
.module-navigation {
  background-color: var(--bg-secondary);
  border-color: var(--border-light);
}

.lesson-tabs button,
.module-tabs button {
  color: var(--text-secondary);
  transition: color 0.2s ease, background-color 0.2s ease;
}

.lesson-tabs button.active,
.module-tabs button.active {
  color: var(--primary-color);
  background-color: var(--bg-tertiary);
  border-color: var(--primary-color);
}

/* Améliorer les contrastes sur les différents éléments */
h1, h2, h3, h4, h5, h6 {
  color: var(--text-primary);
}

p, span, div {
  color: var(--text-secondary);
}

a {
  color: var(--accent-color);
}

/* Classe pour rafraîchir temporairement les styles */
.text-refresh {
  animation: refresh 0.1s;
}

@keyframes refresh {
  0% { opacity: 0.9; }
  100% { opacity: 1; }
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Classes d'animation */
.animate-fade-in {
  animation: fadeIn 0.5s ease forwards;
}

.animate-slide-up {
  animation: slideUp 0.5s ease forwards;
}

.animate-pulse {
  animation: pulse 2s infinite;
}

/* Composants personnalisés */
@layer components {
  /* Boutons */
  .btn {
    @apply px-4 py-2 rounded-md font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .btn-primary {
    @apply bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500;
  }
  
  .btn-secondary {
    @apply bg-emerald-600 text-white hover:bg-emerald-700 focus:ring-emerald-500;
  }
  
  .btn-accent {
    @apply bg-orange-500 text-white hover:bg-orange-600 focus:ring-orange-400;
  }
  
  .btn-outline {
    @apply border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 focus:ring-gray-500 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800;
  }
  
  /* Cartes */
  .card {
    @apply bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 transition-all duration-200 hover:shadow-lg dark:bg-gray-800 dark:border-gray-700;
  }
  
  .card-hover {
    @apply hover:border-indigo-300 hover:translate-y-[-4px];
  }
  
  /* Badges */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  
  .badge-primary {
    @apply bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200;
  }
  
  .badge-secondary {
    @apply bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200;
  }
  
  .badge-accent {
    @apply bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200;
  }
  
  /* Formulaires */
  .form-input {
    @apply block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white;
  }
  
  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300;
  }
  
  /* Conteneurs de section */
  .section-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12;
  }
  
  /* Titres */
  .title-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400;
  }
  
  /* Éditeur de code */
  .code-editor {
    @apply font-mono text-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700;
  }
  
  .code-preview {
    @apply rounded-lg overflow-hidden border border-gray-200 bg-white p-4 dark:border-gray-700 dark:bg-gray-900;
  }
}

/* Styles spécifiques pour les modules d'apprentissage */
.learning-module {
  @apply relative overflow-hidden;
}

.learning-module::before {
  content: '';
  @apply absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-indigo-500 to-purple-500;
}

.learning-path-item {
  @apply relative pl-8;
}

.learning-path-item::before {
  content: '';
  @apply absolute left-0 top-1/2 w-6 h-6 -mt-3 rounded-full border-2 border-indigo-500 bg-white dark:bg-gray-800;
}

.learning-path-item.completed::before {
  @apply bg-indigo-500 text-white;
  content: '✓';
  @apply flex items-center justify-center text-xs font-bold;
}

.learning-path-item::after {
  content: '';
  @apply absolute left-3 top-6 w-0.5 h-full bg-indigo-200 dark:bg-indigo-800;
}

.learning-path-item:last-child::after {
  @apply hidden;
}

/* Styles pour les composants de gamification */
.xp-badge {
  @apply relative inline-flex items-center justify-center;
}

.xp-badge::after {
  content: 'XP';
  @apply absolute -top-1 -right-1 text-[10px] font-bold bg-yellow-400 text-yellow-800 rounded-full px-1.5 py-0.5;
}

.level-indicator {
  @apply relative overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700;
  height: 8px;
}

.level-progress {
  @apply absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-500 to-purple-500;
  transition: width 0.5s ease;
}

/* Styles pour les animations de récompense */
.reward-animation {
  @apply fixed inset-0 flex items-center justify-center z-50 pointer-events-none;
  perspective: 1000px;
}

.reward-animation-content {
  @apply bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-8 text-center transform;
  animation: rewardAppear 0.5s ease forwards, rewardFloat 2s ease-in-out 0.5s infinite;
}

@keyframes rewardAppear {
  from { opacity: 0; transform: scale(0.8) rotateY(-20deg); }
  to { opacity: 1; transform: scale(1) rotateY(0); }
}

@keyframes rewardFloat {
  0% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0); }
}

/* Styles pour les tooltips */
.tooltip {
  @apply relative inline-block;
}

.tooltip-content {
  @apply absolute z-10 p-2 text-xs rounded shadow-lg bg-gray-900 text-white whitespace-nowrap;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-bottom: 5px;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s, visibility 0.2s;
}

.tooltip:hover .tooltip-content {
  opacity: 1;
  visibility: visible;
}

.tooltip-content::after {
  content: '';
  @apply absolute w-0 h-0;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border-width: 5px;
  border-style: solid;
  border-color: #1f2937 transparent transparent transparent;
}

/* Styles pour les scrollbars */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100 dark:bg-gray-800 rounded-full;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 dark:bg-gray-600 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400 dark:bg-gray-500;
}

/* Styles pour les effets de glassmorphism */
.glass {
  @apply bg-white bg-opacity-20 backdrop-filter backdrop-blur-lg border border-white border-opacity-20 shadow-xl;
}

.dark .glass {
  @apply bg-gray-900 bg-opacity-30 border-gray-700 border-opacity-30;
}

/* Styles pour les effets de néomorphisme */
.neomorphic {
  @apply bg-gray-100 rounded-xl shadow-[5px_5px_15px_#d1d1d1,-5px_-5px_15px_#ffffff];
}

.dark .neomorphic {
  @apply bg-gray-800 shadow-[5px_5px_15px_#0d131e,-5px_-5px_15px_#151d30];
}

/* Styles pour les effets de hover sur les cartes */
.card-3d {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card-3d:hover {
  transform: translateY(-5px) rotateX(2deg) rotateY(2deg);
  @apply shadow-xl;
}

/* Styles pour les effets de texte */
.text-shadow {
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
}

.dark .text-shadow {
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
}

/* Styles pour les effets de bordure */
.border-gradient {
  border: 2px solid;
  border-image-slice: 1;
  border-image-source: linear-gradient(to right, var(--primary-color), var(--secondary-color));
}

/* Styles pour les effets de fond */
.bg-gradient {
  @apply bg-gradient-to-r from-indigo-500 to-purple-500;
}

.bg-pattern {
  background-color: #f9fafb;
  background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23a5b4fc' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

.dark .bg-pattern {
  background-color: #111827;
  background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234f46e5' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

/* Styles spécifiques pour les pages de module */
[data-page-type="module"] h1,
[data-page-type="module"] h2,
[data-page-type="module"] h3,
[data-page-type="module"] .module-title {
  color: var(--text-primary) !important;
  font-weight: 600;
}

.dark [data-page-type="module"] h1,
.dark [data-page-type="module"] h2,
.dark [data-page-type="module"] h3,
.dark [data-page-type="module"] .module-title {
  color: white !important;
}

/* Règle spécifique pour le texte problématique */
.module-title, 
.module-description, 
.module-info {
  color: var(--text-primary) !important;
}

/* === ANIMATIONS BLOBS (à ajouter en bas de globals.css) === */
@keyframes blob {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33%      { transform: translate(30px, -50px) scale(1.1); }
  66%      { transform: translate(-20px, 20px) scale(0.9); }
}

.animate-blob {
  animation: blob 8s infinite;
}

.animation-delay-2000 {
  animation-delay: 2s;
}

.code-editor-effect {
  box-shadow: 0 20px 40px -10px rgba(18, 24, 45, 0.15);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.feature-card:hover {
  transform: translateY(-3px);
}

.gradient-border::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 2rem;
  padding: 1px;
  background: linear-gradient(45deg, #4f46e5 0%, #2563eb 100%);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
}
